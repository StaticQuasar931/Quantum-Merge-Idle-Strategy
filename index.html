<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quantum Merge â€“ Idle Strategy Game</title>
  <meta name="description" content="Merge quantum particles, unlock exponential energy, and evolve through the quantum realms. A strategy-skill game of progression and power.">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(ellipse at center, #10141a 0%, #000000 100%);
      color: white;
      font-family: 'Segoe UI', sans-serif;
      overflow: hidden;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin: 10px;
    }
    #score {
      margin: 10px;
      font-size: 18px;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(5, 80px);
      grid-template-rows: repeat(5, 80px);
      gap: 8px;
      margin: 20px;
    }
    .cell {
      background: #1f1f2e;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      border: 2px solid #00f0ff66;
      transition: transform 0.1s;
    }
    .cell:hover {
      transform: scale(1.05);
    }
    .highlight {
      border-color: #ffffff;
    }
    button {
      background: #00f0ff;
      color: black;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Quantum Merge</h1>
  <div id="score">Energy: 0</div>
  <div id="grid"></div>
  <button onclick="resetGame()">Reset</button>

  <script>
    const gridSize = 5;
    const grid = document.getElementById('grid');
    const scoreDisplay = document.getElementById('score');
    let cells = [];
    let score = 0;
    let selected = null;

    function getSaveData() {
      return JSON.parse(localStorage.getItem('quantumMergeData') || 'null');
    }

    function saveData() {
      localStorage.setItem('quantumMergeData', JSON.stringify({ cells, score }));
    }

    function resetGame() {
      if (!confirm("Reset everything?")) return;
      cells = Array(gridSize * gridSize).fill(0).map(() => Math.random() < 0.2 ? 1 : 0);
      score = 0;
      saveData();
      render();
    }

    function loadGame() {
      const saved = getSaveData();
      if (saved) {
        cells = saved.cells;
        score = saved.score;
      } else {
        resetGame();
      }
      render();
    }

    function render() {
      grid.innerHTML = '';
      cells.forEach((value, i) => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        if (selected === i) cell.classList.add('highlight');
        cell.textContent = value > 0 ? `Q${value}` : '';
        cell.style.background = value > 0 ? `hsl(${(value * 40) % 360}, 70%, 50%)` : '#1f1f2e';
        cell.onclick = () => handleClick(i);
        grid.appendChild(cell);
      });
      scoreDisplay.textContent = `Energy: ${score.toLocaleString()}`;
    }

    function handleClick(i) {
      if (selected === null) {
        if (cells[i] > 0) selected = i;
      } else if (selected === i) {
        selected = null;
      } else {
        if (cells[i] === cells[selected] && cells[i] !== 0) {
          cells[i]++;
          score += Math.pow(2, cells[i]);
          cells[selected] = 0;
          selected = null;
          saveData();
        } else {
          selected = null;
        }
      }
      render();
    }

    loadGame();
  </script>
</body>
</html>
